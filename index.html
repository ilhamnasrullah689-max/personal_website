
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ilham Nasrullah</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest"></script>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" 
/> 
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
  body { background:#0b0b0c; }
  .bone { color:#e8e6df; }
  .gold { color:#d4af37; }

  .float {
    animation: float 8s ease-in-out infinite;
  }
  @keyframes float {
    0%,100% { transform: translateY(0); }
    50% { transform: translateY(-4px); }
  }
</style>
</head>

<body class="bone flex justify-center">

<!-- TITLE POJOK -->
<div class="fixed top-6 left-6 z-50">
  <h1 class="text-3xl font-semibold tracking-tight">
    ilhamnsrllh<span class="gold">.</span>
  </h1>
</div>

<!-- CONTAINER -->
<div class="w-full max-w-[420px] p-3 space-y-3 mt-24">

  <!-- ROW 1 -->
  <div class="flex gap-3">

    <!-- LEFT -->
    <div class="w-[60%] bg-zinc-900 rounded-2xl p-4 float space-y-2">
      <h2 class="text-base font-medium">
        Ilham Nasrullah
      </h2>
      <p class="text-sm text-zinc-400 leading-relaxed">
        DevOps Engineer.<br>
        Build → Deploy → Scale.
      </p>
    </div>

    <!-- MAP -->
    <div class="w-[40%] bg-zinc-900 rounded-2xl overflow-hidden h-[140px] 
float">
      <div id="map" class="w-full h-full"></div>
    </div>

  </div>

  <!-- ROW 2 -->
  <div class="flex gap-3">

    <!-- RESUME -->
    <a href="resume"
       class="w-[40%] bg-zinc-900 rounded-2xl p-4
              flex items-center justify-between
              hover:bg-zinc-800 transition">
      <span class="text-zinc-400 text-sm">Resume</span>
      <i data-lucide="arrow-up-right"></i>
    </a>

    <!-- ICONS -->
    <div class="w-[60%] bg-zinc-900 rounded-2xl p-8
                flex items-center justify-center gap-8">

      <a href="mailto:ilhamnasrullah689@gmail.com"
         class="hover:scale-110 transition">
        <i data-lucide="mail" class="w-8 h-8 text-zinc-300"></i>
      </a>

      <a href="https://GitHub.com"
         target="_blank"
         class="hover:scale-110 transition">
        <i data-lucide="GitHub" class="w-8 h-8 text-zinc-300"></i>
      </a>

      <a href="https://linkedin.com"
         target="_blank"
         class="hover:scale-110 transition">
        <i data-lucide="linkedin" class="w-8 h-8 text-zinc-300"></i>
      </a>

    </div>

  </div>

  <!-- ROW 3 : MY TOP TRACKS (compact, single-track, auto-rotate every 5 minutes) -->
  <div id="music-wrap" class="bg-zinc-900 rounded-2xl overflow-hidden float">
    <div class="p-3 flex items-center justify-between gap-3">
      <div class="flex items-center gap-3">
        <img id="track-art" src="" alt="art" class="w-14 h-14 rounded object-cover bg-zinc-800">
        <div>
          <h4 class="text-sm font-medium">My Top Tracks</h4>
          <p id="track-title" class="text-xs text-zinc-300">—</p>
          <p id="track-info" class="text-xs text-zinc-400">Track 0 of 0 — Auto-rotate 5s</p>
        </div>
      </div>

      <div class="flex items-center gap-2">
        <a id="open-spotify" href="#" target="_blank" class="text-xs px-3 py-1 rounded bg-zinc-800 hover:bg-zinc-700 transition">Open in Spotify</a>
      </div>
          <div class="flex items-center gap-2">
            <label for="auto-interval" class="text-xs text-zinc-400">Auto</label>
            <select id="auto-interval" class="text-xs bg-zinc-800 text-zinc-200 px-2 py-1 rounded">
              <option value="5">5s</option>
              <option value="10">10s</option>
              <option value="20">20s</option>
              <option value="60">60s</option>
            </select>
          </div>
    </div>

    <div id="spotify-container" class="w-full border-t border-zinc-800">
      <!-- compact single-track Spotify embed (height ~80px) -->
      <iframe
        id="spotify"
        title="Track"
        class="w-full h-[80px]"
        frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy">
      </iframe>
    </div>
  </div>

</div>

<!-- ICON INIT -->
<script>
  lucide.createIcons();
</script>

<!-- MUSIC: single-track embed with auto-rotate (5 minutes) and hidden full playlist -->
<script>
  (function(){
    // Replace these with your Spotify track IDs (no full URL). Order matters.
    const topTracks = [
      '5CNmH8vWVBaIlkNUbNBLVO',
      '2CZ2f5buwvd9LCtHrrb0vl',
      '6rH7DwITrq2MhxSSuL91r9',
      '5fTf6UUW8Hc2OlXMbS677Q',
      '04pLPqudepmNuWZ6q4LQjn',
      '69kZsoRrSf7GBTSdJ4BjqA',
      '0sHMmGcfDYvPzyQ5jzoDjz',
      '2PsYDZV8rHT7zkPBnl8lY0',
      '0i6m1MydEoIZEx2UEtnIdP',
      '0wULafSHeHYZFu54R9ZFRJ'
    ];

    const playlistId = '6JS56x2WiOFv3VccXEiAcp';
    const iframe = document.getElementById('spotify');
    const info = document.getElementById('track-info');
    const art = document.getElementById('track-art');
    const titleEl = document.getElementById('track-title');
    const openSpotify = document.getElementById('open-spotify');

    let idx = 0;
    let intervalMs = 20 * 1000; // default 20 seconds
    let timer = null;
    const metaCache = {};

    async function fetchMeta(id) {
      if (metaCache[id]) return metaCache[id];
      try {
        const res = await fetch(`https://open.spotify.com/oembed?url=https://open.spotify.com/track/${id}`);
        if (!res.ok) throw new Error('oembed failed');
        const j = await res.json();
        const titleRaw = j.title || '';
        const parts = titleRaw.split(' - ').length > 1 ? titleRaw.split(' - ') : titleRaw.split(' — ');
        const track = parts[0] || titleRaw;
        const artist = parts[1] || '';
        const meta = { track, artist, thumb: j.thumbnail_url };
        metaCache[id] = meta;
        return meta;
      } catch (e) {
        return { track: '', artist: '', thumb: '' };
      }
    }

    async function loadTrack(i) {
      if (!topTracks.length) {
        info.textContent = 'No tracks configured — add IDs in script';
        iframe.src = '';
        titleEl.textContent = '';
        art.src = '';
        return;
      }
      idx = (i + topTracks.length) % topTracks.length;
      const id = topTracks[idx];
      iframe.src = `https://open.spotify.com/embed/track/${id}?theme=0`;
      openSpotify.href = `https://open.spotify.com/track/${id}`;
        updateIntervalDisplay();
        info.textContent = `Track ${idx+1} of ${topTracks.length} — Auto-rotate ${intervalMs / 1000}s`;
      const meta = await fetchMeta(id);
      titleEl.textContent = meta.track + (meta.artist ? ` — ${meta.artist}` : '');
      if (meta.thumb) art.src = meta.thumb;
    }

    function startAuto() {
      if (timer) clearInterval(timer);
      timer = setInterval(() => loadTrack(idx + 1), intervalMs);
    }

    function updateIntervalDisplay(){
      const seconds = Math.round(intervalMs/1000);
      info.textContent = `Track ${idx+1} of ${topTracks.length} — Auto-rotate ${seconds}s`;
    }

    function setAutoSeconds(sec){
      intervalMs = sec * 1000;
      if (timer) {
        clearInterval(timer);
        timer = setInterval(() => loadTrack(idx + 1), intervalMs);
      }
      updateIntervalDisplay();
      try { localStorage.setItem('autoSeconds', String(sec)); } catch(e){}
      const sel = document.getElementById('auto-interval');
      if (sel) sel.value = String(sec);
    }

    // read saved preference
    try{
      const saved = localStorage.getItem('autoSeconds');
      if (saved && !isNaN(Number(saved))) setAutoSeconds(Number(saved));
      else setAutoSeconds(Math.round(intervalMs/1000));
    }catch(e){ setAutoSeconds(Math.round(intervalMs/1000)); }

    // wire select control
    const autoSel = document.getElementById('auto-interval');
    if (autoSel) {
      autoSel.value = String(Math.round(intervalMs/1000));
      autoSel.addEventListener('change', (ev)=>{
        const v = Number(ev.target.value) || Math.round(intervalMs/1000);
        setAutoSeconds(v);
      });
    }

    // no collapse / full-playlist behavior — compact single-track only

    // init
    if (topTracks.length) {
      loadTrack(0);
      startAuto();
    } else {
      info.textContent = 'No tracks configured — add IDs in script';
    }
  })();
</script>

<!-- MAP -->
<script>
  const map = L.map('map', {
    zoomControl: false,
    attributionControl: false
    minzoom: 3
  }).setView([-2.2, 118.0], 4);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png')
    .addTo(map);

  const lokasiMalang = ([-7.96318, 112.60837]);
  L.marker(lokasiMalang).addTo(map);
</script>

</body>
</html>

